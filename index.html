<!DOCTYPE html>
<html>
<head>
    <title>Interactive Grid</title>
    <style>
        .grid-container {
            display: inline-block;
            border: 1px solid #333;
            margin: 20px 0;
        }
        .grid-row {
            display: flex;
        }
        .cell {
            width: 2px;
            height: 2px;
            border: 0px solid #ccc;
            background-color: black;
            cursor: pointer;
        }
        .cell.white {
            background-color: white;
        }
        .controls {
            margin: 20px 0;
        }
        input {
            width: 60px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="controls">
        Rows: <input type="number" id="rows" value="10" min="1" max="50">
        Columns: <input type="number" id="cols" value="10" min="1" max="50">
        <button onclick="createGrid()">Create Grid</button>
    </div>
    <div class="controls">
        <button id="startBtn" onclick="startSimulation()">Start</button>
        <button id="pauseBtn" onclick="pauseSimulation()" disabled>Pause</button>
    </div>
    <div id="gridContainer" class="grid-container"></div>

    <script>
        let grid = [];
        let simulationInterval;
        let isRunning = false;

        function createGrid() {
            const rows = parseInt(document.getElementById('rows').value);
            const cols = parseInt(document.getElementById('cols').value);
            
            // Initialize grid array
            grid = Array(rows).fill().map(() => Array(cols).fill(0));
            
            // Create HTML grid
            const container = document.getElementById('gridContainer');
            container.innerHTML = '';
            
            for (let i = 0; i < rows; i++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'grid-row';
                
                for (let j = 0; j < cols; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.onclick = () => toggleCell(i, j);
                    rowDiv.appendChild(cell);
                }
                
                container.appendChild(rowDiv);
            }
            
            // Reset simulation state
            pauseSimulation();
        }

        function toggleCell(row, col) {
            if (!isRunning) {
                grid[row][col] = grid[row][col] === 0 ? 1 : 0;
                const cells = document.getElementsByClassName('cell');
                const index = row * grid[0].length + col;
                cells[index].classList.toggle('white');
            }
        }

        function updateDisplay() {
            const cells = document.getElementsByClassName('cell');
            for (let i = 0; i < grid.length; i++) {
                for (let j = 0; j < grid[0].length; j++) {
                    const index = i * grid[0].length + j;
                    cells[index].classList.toggle('white', grid[i][j] === 1);
                }
            }
        }

        function updateGrid() {
            // Create a copy of the current grid
            const newGrid = grid.map(row => [...row]);
            
            // Example rule: A cell becomes white if it has an odd number of white neighbors
            for (let i = 0; i < grid.length; i++) {
                for (let j = 0; j < grid[0].length; j++) {
                    let whiteNeighbors = 0;
                    
                    // Check all 8 neighbors
                    for (let di = -1; di <= 1; di++) {
                        for (let dj = -1; dj <= 1; dj++) {
                            if (di === 0 && dj === 0) continue;
                            
                            const ni = (i + di + grid.length) % grid.length;
                            const nj = (j + dj + grid[0].length) % grid[0].length;
                            
                            whiteNeighbors += grid[ni][nj];
                        }
                    }
                    
                    // Update cell based on neighbor count
                    newGrid[i][j] = whiteNeighbors % 2 === 1 ? 1 : 0;
                }
            }
            
            grid = newGrid;
            updateDisplay();
        }

        function startSimulation() {
            if (!isRunning) {
                isRunning = true;
                document.getElementById('startBtn').disabled = true;
                document.getElementById('pauseBtn').disabled = false;
                simulationInterval = setInterval(updateGrid, 500);
            }
        }

        function pauseSimulation() {
            isRunning = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            clearInterval(simulationInterval);
        }

        // Create initial grid
        createGrid();
    </script>
</body>
</html>
